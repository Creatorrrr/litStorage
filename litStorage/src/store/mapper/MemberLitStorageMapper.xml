<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

  <mapper namespace="store.mapper.MemberLitStorageMapper">
  
    <resultMap type="MemberLitStorage" id="memberLitStorageMap">
		<result property="joinTime" column="jointime"/>
		<association property="member" javaType="Member">
		    <id property="id" column="memberid"/>
		</association>
		<association property="litStorage" javaType="LitStorage">
		    <id property="id" column="litstorageid"/>
		</association>
  		<!-- <association property="member" column="memberid" 
			select="store.mapper.MemberMapper.selectMemberById" 
			javaType="Member" jdbcType="VARCHAR"/>
		<association property="litStorage" column="litstorageid" 
			select="store.mapper.LitStorageMapper.selectLitStorageById" 
			javaType="LitStorage" jdbcType="VARCHAR"/> -->
  	</resultMap>
  	
  	<resultMap type="Member" id="memberMap">
  		<association property="member" column="memberid"
			select="store.mapper.MemberMapper.selectMemberById" 
			javaType="Member" jdbcType="VARCHAR"/>
  		<!-- <association property="member" column="memberid" 
			select="store.mapper.MemberMapper.selectMemberById" 
			javaType="Member" jdbcType="VARCHAR"/>
		<association property="litStorage" column="litstorageid" 
			select="store.mapper.LitStorageMapper.selectLitStorageById" 
			javaType="LitStorage" jdbcType="VARCHAR"/> -->
  	</resultMap>
  	
  	<insert id="insertMemberLitStorage" parameterType="MemberLitStorage">
  		INSERT INTO memberlitstoragetest(memberid, litstorageid, jointime)
  		VALUES(#{member.id}, #{litStorage.id}, TO_DATE(SYSDATE,'yyyy/mm/dd hh24:mi:ss'))
  	</insert>
  	
  	<select id="selectMemberLitStoragesByLitStorageId" parameterType="String" resultMap="memberLitStorageMap">
  		SELECT memberid, litstorageid, jointime
  		FROM memberlitstoragetest
  		WHERE litstorageid = #{id}
  	</select>
  	
  	<select id="selectMemberLitStoragesByMemberId" parameterType="String" resultMap="memberLitStorageMap">
  		SELECT memberid, litstorageid, jointime
  		FROM memberlitstoragetest
  		WHERE memberid = #{id}
  	</select>
  	
    <select id="selectMembersByLitStorageId" parameterType="String" resultMap="memberLitStorageMap">
  		SELECT memberid
  		FROM memberlitstoragetest
  		WHERE litstorageid = #{id}
  	</select>
  </mapper>